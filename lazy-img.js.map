{"version":3,"file":"lazy-img.js","sourceRoot":"","sources":["src/lazy-img.ts"],"names":[],"mappings":";;;;;;AAAA,OAAO,EAAE,UAAU,EAAE,IAAI,EAAE,GAAG,EAAE,MAAM,KAAK,CAAC;AAC5C,OAAO,EAAE,aAAa,EAAE,QAAQ,EAAE,MAAM,mBAAmB,CAAC;AAG5D,IAAa,SAAS,GAAtB,MAAa,SAAU,SAAQ,UAAU;IAAzC;;QAsBI,aAAQ,GAAG,4OAA4O,CAAA;QAEhP,cAAS,GAAG,IAAI,CAAC,QAAQ,CAAC;IAwBrC,CAAC;IAtBG,iBAAiB;QACb,KAAK,CAAC,iBAAiB,EAAE,CAAA;QAEzB,IAAI,CAAC,UAAU,CAAC,IAAI,CAAC,GAAG,IAAI,IAAI,CAAC,QAAQ,CAAC,CAAC,IAAI,CAAC,GAAG,EAAE;YACjD,IAAI,CAAC,SAAS,GAAG,IAAI,CAAC,GAAG,IAAI,IAAI,CAAC,QAAQ,CAAC;YAC3C,IAAI,CAAC,aAAa,EAAE,CAAC;QACzB,CAAC,CAAC,CAAC;IACP,CAAC;IAED,KAAK,CAAC,UAAU,CAAC,GAAW;QACxB,MAAM,GAAG,GAAG,IAAI,KAAK,EAAE,CAAC;QACxB,OAAO,IAAI,OAAO,CAAC,OAAO,CAAC,EAAE;YACzB,GAAG,CAAC,MAAM,GAAG,GAAG,EAAE,CAAC,OAAO,CAAC,GAAG,CAAC,CAAA;YAC/B,GAAG,CAAC,GAAG,GAAG,GAAG,CAAC;QAClB,CAAC,CAAC,CAAC;IACP,CAAC;IAED,MAAM;QACF,OAAO,IAAI,CAAA;0BACO,IAAI,CAAC,OAAO,CAAA,CAAC,CAAA,OAAO,CAAA,CAAC,CAAA,EAAE,UAAW,IAAI,CAAC,SAAU;MACrE,CAAC;IACH,CAAC;CACJ,CAAA;AA/CU,gBAAM,GAAG,GAAG,CAAA;;;;;;;;;;;;;IAanB,CAAC;AAGD;IADC,QAAQ,CAAC,EAAE,IAAI,EAAE,OAAO,EAAE,CAAC;0CACX;AAGjB;IADC,QAAQ,CAAC,EAAE,IAAI,EAAE,MAAM,EAAE,CAAC;sCACd;AApBJ,SAAS;IADrB,aAAa,CAAC,UAAU,CAAC;GACb,SAAS,CAgDrB;SAhDY,SAAS","sourcesContent":["import { LitElement, html, css } from 'lit';\r\nimport { customElement, property } from 'lit/decorators.js';\r\n\r\n@customElement('img-lazy')\r\nexport class LazyImage extends LitElement {\r\n    static styles = css`\r\n        :host{\r\n            display: block;\r\n        }\r\n\r\n        img{\r\n            width:100%;\r\n            height:auto;\r\n        }\r\n\r\n        .round{\r\n            border-radius:50%;\r\n        }\r\n   `;\r\n\r\n    @property({ type: Boolean })\r\n    rounded?:boolean;\r\n\r\n    @property({ type: String })\r\n    src?: string;\r\n\r\n    emptyImg = 'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACUAAAAmCAIAAADMaMX6AAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAAzSURBVFhH7c1BEQAwEAOh+lcZKTXB3GsxwNutPqvP6rP6rD6rz+qz+qw+q8/qs/qs22/7cqJrk6NNXs8AAAAASUVORK5CYII='\r\n\r\n    public loadedImg = this.emptyImg;\r\n\r\n    connectedCallback() {\r\n        super.connectedCallback()\r\n\r\n        this.checkImage(this.src || this.emptyImg).then(() => {\r\n            this.loadedImg = this.src || this.emptyImg;\r\n            this.requestUpdate();\r\n        });\r\n    }\r\n\r\n    async checkImage(url: string) {\r\n        const img = new Image();\r\n        return new Promise(resolve => {\r\n            img.onload = () => resolve(img)\r\n            img.src = url;\r\n        });\r\n    }\r\n\r\n    render() {\r\n        return html`\r\n            <img class=\"${this.rounded?'round':''}\" src=\"${ this.loadedImg }\">\r\n     `;\r\n    }\r\n}\r\n\r\ndeclare global {\r\n    interface HTMLElementTagNameMap {\r\n        'img-lazy': LazyImage;\r\n    }\r\n}\r\n"]}